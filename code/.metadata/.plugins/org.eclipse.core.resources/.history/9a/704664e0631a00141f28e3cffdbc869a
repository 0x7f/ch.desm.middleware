package ch.desm.middleware.modules.component.cabine.re420.elements;

import java.util.ArrayList;

import org.apache.log4j.Logger;

public class Re420Fahrschalter {

	private static Logger log = Logger.getLogger(Re420Fahrschalter.class);
	
	private Boolean s150a;
	private Boolean s150b;
	private Boolean s150d;
	private Boolean s150e;
	private Boolean s150f;
	private Boolean s150g;
	private Boolean s150l;
	public boolean isChanged;

	ArrayList<String> disabledList;
	
	public Re420Fahrschalter(){
		disabledList = new ArrayList<String>();
		
		disabledList.add(arg0);
	}
	
	private boolean isInitialized(){
		
		if (s150a != null
				&& s150b != null
				&& s150d != null
				&& s150e != null
				&& s150f != null
				&& s150g != null
				&& s150l != null){
			
			return true;
		}
		
		return false;
	}
	/**
	 * 
	 * @return the global id (key) from the buffered contacts
	 */
	public String getMessagePositionFahrschalter(String key, boolean isEnabled) {
		//buffering incoming Fahrschalter inputs
		this.isChanged(key, isEnabled);
		
		if(isInitialized() && isChanged){
			
			if (!s150a
					&& !s150b
					&& !s150d
					&& !s150e
					&& !s150f
					&& !s150g
					&& !s150l) {
				key = "fahrschalter.bremsen.neutral";
			}
			else if (s150b
					&& s150d
					&& s150e
					&& s150g
					&& s150l) {
				key = "fahrschalter.fahren.m";
			}
			else if (s150b
					&& s150e
					&& s150f
					&& s150g
					&& s150l) {
				key = "fahrschalter.fahren.plusplus";
			}
			else if (s150a && s150e
					&& s150g
					&& s150l) {
				key = "fahrschalter.bremsen.plus";
			} 
			else if (s150a
					&& s150g) {
				key = "fahrschalter.bremsen.punkt";
			} 
			else if (s150a
					&& s150l) {
				key = "fahrschalter.bremsen.minus";
			}
			
			else if (s150b
					&& s150l) {
				key = "fahrschalter.fahren.minus";
			} 
			else if (s150b
					&& s150g) {
				key = "fahrschalter.fahren.punkt";
			} 
			
			else if (s150b
					&& s150e
					&& s150g) {
				key = "fahrschalter.fahren.plus";
			}else{
				
				if(isChanged){
					log.warn("configuration error in class: " + this.getClass() + " with key: " + key);
					return "";
				}
			}
		}else{
			if(isChanged){
				key = "";
			}
		}
		
		return key;
	}

	public void isChanged(String key, boolean value) {
		isChanged = false;
		
		switch (key) {
			case ("s150a"): {
				if(!s150a.equals(value)){
					s150a = value;
					isChanged = true;
				}
				
				break;
			}
			case ("s150b"): {
				if(!s150b.equals(value)){
					s150b = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
			case ("s150d"): {
				if(!s150d.equals(value)){
					s150d = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
			case ("s150e"): {
				if(!s150e.equals(value)){
					s150e = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
			case ("s150f"): {
				if(!s150f.equals(value)){
					s150f = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
			case ("s150g"): {
				if(!s150g.equals(value)){
					s150g = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
			case ("s150l"): {
				if(!s150l.equals(value)){
					s150l = value;
					isChanged = true;
				}else{
					isChanged = false;
				}
				
				break;
			}
		}
	}

}
